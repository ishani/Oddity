/*
  .oooooo.         .o8        .o8   o8o      .               
 d8P'  `Y8b       "888       "888   `"'    .o8               
888      888  .oooo888   .oooo888  oooo  .o888oo oooo    ooo 
888      888 d88' `888  d88' `888  `888    888    `88.  .8'  
888      888 888   888  888   888   888    888     `88..8'   
`88b    d88' 888   888  888   888   888    888 .    `888'    
 `Y8bood8P'  `Y8bod88P" `Y8bod88P" o888o   "888"     .8'  2.0
                                                 .o..P'      
                                                 `Y8P'       
                                                             
*/

#include "common.h"
#include "pcf.h"

/*
    function sample(x, y) 
    {
        var f = (1.0 + (Math.atan2((15.5 - x), (15.5 - y)) / Math.PI)) * 0.5;
        if (f < 0.5) {
            f = 1.0 - f;
            f *= 0.99;
        }
        return (f - 0.5) * 2.01;
    }
*/

const uint16_t pcf_turn[32 * 32] __IN_FLASH__ = {
0x405a, 0x3d9f, 0x3ab6, 0x379b, 0x344d, 0x30c9, 0x2d0e, 0x2919, 0x24ed, 0x2089, 0x1bf0, 0x1727, 0x1232, 0x0d1a, 0x07e8, 0x02a4, 0x000b, 0x0541, 0x0a66, 0x0f71, 0x1459, 0x1916, 0x1da3, 0x21fc, 0x261e, 0x2a08, 0x2dba, 0x3135, 0x347a, 0x378d, 0x3a6f, 0x3d23, 
0x4315, 0x405a, 0x3d6d, 0x3a4b, 0x36f1, 0x335a, 0x2f86, 0x2b72, 0x271d, 0x2288, 0x1db5, 0x18a8, 0x1368, 0x0dfd, 0x0872, 0x02d3, 0x0039, 0x05ca, 0x0b47, 0x10a4, 0x15d6, 0x1ad6, 0x1f9d, 0x2426, 0x2870, 0x2c7a, 0x3044, 0x33d1, 0x3723, 0x3a3e, 0x3d23, 0x3fd7, 
0x45ff, 0x4347, 0x405a, 0x3d34, 0x39d0, 0x362a, 0x323e, 0x2e0b, 0x298d, 0x24c4, 0x1fb3, 0x1a5d, 0x14c9, 0x0f01, 0x0911, 0x0309, 0x006e, 0x0667, 0x0c48, 0x1201, 0x1787, 0x1ccf, 0x21d4, 0x2690, 0x2b02, 0x2f2b, 0x330d, 0x36a9, 0x3a05, 0x3d23, 0x4008, 0x42b9, 
0x4919, 0x4669, 0x4381, 0x405a, 0x3cf1, 0x393f, 0x353f, 0x30ee, 0x2c48, 0x274a, 0x21f7, 0x1c50, 0x165f, 0x102d, 0x09c9, 0x0347, 0x00ac, 0x071d, 0x0d70, 0x1393, 0x1975, 0x1f0d, 0x2453, 0x2944, 0x2dde, 0x3225, 0x361a, 0x39c2, 0x3d23, 0x4041, 0x4322, 0x45cb, 
0x4c67, 0x49c4, 0x46e5, 0x43c4, 0x405a, 0x3ca1, 0x3893, 0x3427, 0x2f5a, 0x2a27, 0x248d, 0x1e90, 0x1835, 0x118a, 0x0aa1, 0x038f, 0x00f4, 0x07f3, 0x0ecb, 0x1564, 0x1baf, 0x219d, 0x2728, 0x2c4e, 0x310f, 0x356f, 0x3974, 0x3d23, 0x4084, 0x439d, 0x4674, 0x4911, 
0x4feb, 0x4d5a, 0x4a8b, 0x4776, 0x4413, 0x405a, 0x3c42, 0x37c2, 0x32d2, 0x2d6b, 0x2789, 0x212d, 0x1a5d, 0x1327, 0x0ba0, 0x03e6, 0x0149, 0x08f0, 0x1063, 0x1787, 0x1e45, 0x2491, 0x2a64, 0x2fbd, 0x34a1, 0x3915, 0x3d23, 0x40d2, 0x442c, 0x4739, 0x4a02, 0x4c8c, 
0x53a7, 0x512f, 0x4e76, 0x4b75, 0x4822, 0x4472, 0x405a, 0x3bce, 0x36c2, 0x312a, 0x2b00, 0x243f, 0x1cec, 0x1516, 0x0cd5, 0x044f, 0x01b1, 0x0a21, 0x124d, 0x1a10, 0x2150, 0x27ff, 0x2e1a, 0x33a3, 0x38a2, 0x3d23, 0x4130, 0x44d7, 0x4821, 0x4b1b, 0x4dcc, 0x503e, 
0x579b, 0x5543, 0x52aa, 0x4fc6, 0x4c8d, 0x48f2, 0x44e6, 0x405a, 0x3b3d, 0x357e, 0x2f0e, 0x27e5, 0x2001, 0x1770, 0x0e50, 0x04d0, 0x0231, 0x0b99, 0x14a1, 0x1d1d, 0x24ec, 0x2c03, 0x3262, 0x3813, 0x3d23, 0x41a3, 0x45a5, 0x4937, 0x4c67, 0x4f44, 0x51d6, 0x5428, 
0x5bc8, 0x5998, 0x5728, 0x546d, 0x515b, 0x4de2, 0x49f3, 0x4578, 0x405a, 0x3a83, 0x33d8, 0x2c48, 0x23c7, 0x1a5d, 0x102d, 0x0574, 0x02d4, 0x0d70, 0x1787, 0x20d8, 0x2944, 0x30c1, 0x375a, 0x3d23, 0x4233, 0x46a3, 0x4a88, 0x4df8, 0x5102, 0x53b6, 0x5620, 0x584a, 
0x602c, 0x5e2d, 0x5bf0, 0x596a, 0x568e, 0x534a, 0x4f8a, 0x4b37, 0x4632, 0x405a, 0x398a, 0x319e, 0x2879, 0x1e16, 0x1295, 0x064a, 0x03a8, 0x0fd3, 0x1b36, 0x257f, 0x2e8c, 0x3664, 0x3d23, 0x42ec, 0x47e3, 0x4c2c, 0x4fe2, 0x531d, 0x55f3, 0x5872, 0x5aa9, 0x5ca3, 
0x64c4, 0x6300, 0x6102, 0x5ebe, 0x5c27, 0x592b, 0x55b5, 0x51a6, 0x4cdc, 0x472a, 0x405a, 0x3830, 0x2e70, 0x22f5, 0x15d1, 0x076e, 0x04c8, 0x1306, 0x2009, 0x2b66, 0x350d, 0x3d23, 0x43e1, 0x4985, 0x4e42, 0x5247, 0x55b5, 0x58a9, 0x5b39, 0x5d77, 0x5f70, 0x6130, 
0x698e, 0x680d, 0x6658, 0x6464, 0x6225, 0x5f88, 0x5c75, 0x58cf, 0x546d, 0x4f17, 0x4885, 0x405a, 0x362a, 0x298d, 0x1a5d, 0x0911, 0x0667, 0x1787, 0x2690, 0x330d, 0x3d23, 0x4539, 0x4bba, 0x5102, 0x555a, 0x58f6, 0x5c00, 0x5e97, 0x60d1, 0x62bf, 0x6470, 0x65ed, 
0x6e82, 0x6d4c, 0x6bec, 0x6a56, 0x687f, 0x6658, 0x63c8, 0x60b3, 0x5cee, 0x583c, 0x5245, 0x4a8b, 0x405a, 0x32d2, 0x212d, 0x0ba0, 0x08f0, 0x1e45, 0x2fbd, 0x3d23, 0x4739, 0x4ee0, 0x54c7, 0x596d, 0x5d29, 0x6036, 0x62bf, 0x64e1, 0x66b3, 0x6845, 0x69a2, 0x6ad5, 
0x739a, 0x72b7, 0x71b4, 0x7088, 0x6f2a, 0x6d8e, 0x6b9f, 0x6944, 0x6658, 0x629f, 0x5dc0, 0x5728, 0x4de2, 0x405a, 0x2c48, 0x102d, 0x0d70, 0x2944, 0x3d23, 0x4a88, 0x53b6, 0x5a3d, 0x5f10, 0x62bf, 0x65a4, 0x67f9, 0x69e3, 0x6b7b, 0x6cd5, 0x6dfe, 0x6eff, 0x6fe0, 
0x78cd, 0x7842, 0x77a3, 0x76eb, 0x7614, 0x7514, 0x73e0, 0x7265, 0x7088, 0x6e1f, 0x6ae4, 0x6658, 0x5f88, 0x546d, 0x405a, 0x1a5d, 0x1787, 0x3d23, 0x5102, 0x5c00, 0x62bf, 0x673f, 0x6a73, 0x6cd5, 0x6ead, 0x7024, 0x7156, 0x7253, 0x7328, 0x73df, 0x747c, 0x7505, 
0x7e10, 0x7de2, 0x7dac, 0x7d6e, 0x7d25, 0x7cce, 0x7c66, 0x7be4, 0x7b40, 0x7a6a, 0x7947, 0x77a3, 0x7514, 0x7088, 0x6658, 0x405a, 0x3d23, 0x62bf, 0x6cd5, 0x7156, 0x73df, 0x757e, 0x769e, 0x7772, 0x7814, 0x7894, 0x78fc, 0x7952, 0x799a, 0x79d8, 0x7a0d, 0x7a3b, 
0x8359, 0x8388, 0x83bd, 0x83fb, 0x8444, 0x849b, 0x8504, 0x8585, 0x8629, 0x86ff, 0x8822, 0x89c6, 0x8c55, 0x90e1, 0x9b11, 0xc10f, 0xbc8e, 0x96f2, 0x8cdc, 0x885b, 0x85d2, 0x8433, 0x8313, 0x823f, 0x819d, 0x811c, 0x80b5, 0x805f, 0x8017, 0x7fd9, 0x7fa4, 0x7f76, 
0x889c, 0x8927, 0x89c6, 0x8a7e, 0x8b55, 0x8c55, 0x8d89, 0x8f04, 0x90e1, 0x934a, 0x9685, 0x9b11, 0xa1e1, 0xacfc, 0xc10f, 0xe70c, 0xe22a, 0xbc8e, 0xa8af, 0x9db0, 0x96f2, 0x9271, 0x8f3e, 0x8cdc, 0x8b04, 0x898c, 0x885b, 0x875e, 0x8688, 0x85d2, 0x8535, 0x84ac, 
0x8dcf, 0x8eb2, 0x8fb5, 0x90e1, 0x923f, 0x93db, 0x95ca, 0x9825, 0x9b11, 0x9eca, 0xa3a9, 0xaa41, 0xb387, 0xc10f, 0xd521, 0xf13d, 0xec40, 0xd06d, 0xbc8e, 0xaf28, 0xa5fb, 0x9f74, 0x9aa1, 0x96f2, 0x940d, 0x91b8, 0x8fce, 0x8e36, 0x8cdc, 0x8bb3, 0x8ab2, 0x89d1, 
0x92e7, 0x941d, 0x957e, 0x9713, 0x98ea, 0x9b11, 0x9da1, 0xa0b6, 0xa47b, 0xa92d, 0xaf24, 0xb6de, 0xc10f, 0xce97, 0xe03c, 0xf5c9, 0xf0c1, 0xdb6c, 0xc9f3, 0xbc8e, 0xb278, 0xaad1, 0xa4ea, 0xa043, 0x9c88, 0x997b, 0x96f2, 0x94d0, 0x92fe, 0x916c, 0x900f, 0x8edc, 
0x97db, 0x995d, 0x9b11, 0x9d05, 0x9f44, 0xa1e1, 0xa4f4, 0xa89a, 0xacfc, 0xb252, 0xb8e4, 0xc10f, 0xcb3f, 0xd7dc, 0xe70c, 0xf858, 0xf34a, 0xe22a, 0xd321, 0xc6a4, 0xbc8e, 0xb478, 0xadf7, 0xa8af, 0xa457, 0xa0bb, 0x9db0, 0x9b1a, 0x98e0, 0x96f2, 0x9541, 0x93c4, 
0x9ca5, 0x9e69, 0xa068, 0xa2ab, 0xa542, 0xa83e, 0xabb5, 0xafc3, 0xb48d, 0xba3f, 0xc10f, 0xc939, 0xd2fa, 0xde74, 0xeb98, 0xf9fb, 0xf4e9, 0xe6ab, 0xd9a8, 0xce4b, 0xc4a4, 0xbc8e, 0xb5cf, 0xb02c, 0xab6e, 0xa76a, 0xa3fc, 0xa108, 0x9e78, 0x9c3a, 0x9a41, 0x9881, 
0xa13e, 0xa33c, 0xa579, 0xa7ff, 0xaadc, 0xae20, 0xb1df, 0xb632, 0xbb37, 0xc10f, 0xc7df, 0xcfcb, 0xd8f0, 0xe353, 0xeed4, 0xfb1f, 0xf609, 0xe9de, 0xde7b, 0xd432, 0xcb25, 0xc34c, 0xbc8e, 0xb6c5, 0xb1cd, 0xad85, 0xa9cf, 0xa693, 0xa3be, 0xa13f, 0x9f08, 0x9d0e, 
0xa5a1, 0xa7d1, 0xaa41, 0xacfc, 0xb00e, 0xb387, 0xb776, 0xbbf2, 0xc10f, 0xc6e7, 0xcd91, 0xd521, 0xdda3, 0xe70c, 0xf13d, 0xfbf5, 0xf6dd, 0xec40, 0xe22a, 0xd8d9, 0xd06d, 0xc8f0, 0xc257, 0xbc8e, 0xb77e, 0xb30e, 0xaf28, 0xabb9, 0xa8af, 0xa5fb, 0xa391, 0xa167, 
0xa9ce, 0xac26, 0xaebf, 0xb1a3, 0xb4dc, 0xb877, 0xbc83, 0xc10f, 0xc62c, 0xcbeb, 0xd25b, 0xd984, 0xe168, 0xe9f9, 0xf319, 0xfc99, 0xf77f, 0xee18, 0xe50f, 0xdc94, 0xd4c5, 0xcdae, 0xc74f, 0xc19e, 0xbc8e, 0xb80d, 0xb40c, 0xb07a, 0xad49, 0xaa6d, 0xa7db, 0xa589, 
0xadc2, 0xb03a, 0xb2f3, 0xb5f4, 0xb947, 0xbcf7, 0xc10f, 0xc59b, 0xcaa7, 0xd03f, 0xd669, 0xdd2a, 0xe47d, 0xec54, 0xf494, 0xfd1a, 0xf800, 0xef8f, 0xe764, 0xdfa1, 0xd861, 0xd1b2, 0xcb97, 0xc60e, 0xc10e, 0xbc8e, 0xb881, 0xb4da, 0xb190, 0xae96, 0xabe5, 0xa973, 
0xb17e, 0xb40f, 0xb6de, 0xb9f3, 0xbd56, 0xc10f, 0xc527, 0xc9a7, 0xce97, 0xd3fe, 0xd9e0, 0xe03c, 0xe70c, 0xee42, 0xf5c9, 0xfd83, 0xf867, 0xf0c1, 0xe94e, 0xe22a, 0xdb6c, 0xd520, 0xcf4d, 0xc9f3, 0xc510, 0xc09b, 0xbc8e, 0xb8df, 0xb585, 0xb278, 0xafaf, 0xad25, 
0xb502, 0xb7a5, 0xba84, 0xbda5, 0xc10f, 0xc4c8, 0xc8d6, 0xcd42, 0xd20f, 0xd742, 0xdcdc, 0xe2d9, 0xe934, 0xefdf, 0xf6c8, 0xfdda, 0xf8bd, 0xf1be, 0xeae6, 0xe44c, 0xde02, 0xd814, 0xd288, 0xcd63, 0xc8a2, 0xc442, 0xc03d, 0xbc8e, 0xb92d, 0xb614, 0xb33c, 0xb0a0, 
0xb850, 0xbb00, 0xbde8, 0xc10f, 0xc478, 0xc82a, 0xcc2a, 0xd07b, 0xd521, 0xda1f, 0xdf73, 0xe519, 0xeb0b, 0xf13d, 0xf7a0, 0xfe23, 0xf905, 0xf293, 0xec40, 0xe61e, 0xe03c, 0xdaa4, 0xd55e, 0xd06d, 0xcbd3, 0xc78c, 0xc397, 0xbfef, 0xbc8e, 0xb970, 0xb68f, 0xb3e5, 
0xbb6a, 0xbe22, 0xc10f, 0xc435, 0xc799, 0xcb3f, 0xcf2b, 0xd35e, 0xd7dc, 0xdca5, 0xe1b6, 0xe70c, 0xeca0, 0xf268, 0xf858, 0xfe61, 0xf943, 0xf34a, 0xed69, 0xe7b0, 0xe22a, 0xdce2, 0xd7dd, 0xd321, 0xceaf, 0xca86, 0xc6a4, 0xc308, 0xbfac, 0xbc8e, 0xb9a9, 0xb6f8, 
0xbe54, 0xc10f, 0xc3fc, 0xc71e, 0xca78, 0xce0f, 0xd1e3, 0xd5f7, 0xda4c, 0xdee2, 0xe3b4, 0xe8c1, 0xee01, 0xf36c, 0xf8f7, 0xfe96, 0xf978, 0xf3e7, 0xee6a, 0xe90d, 0xe3db, 0xdedb, 0xda14, 0xd58b, 0xd141, 0xcd37, 0xc96d, 0xc5df, 0xc28d, 0xbf73, 0xbc8e, 0xb9da, 
0xc10f, 0xc3ca, 0xc6b3, 0xc9ce, 0xcd1c, 0xd0a0, 0xd45c, 0xd850, 0xdc7c, 0xe0e0, 0xe579, 0xea42, 0xef37, 0xf44f, 0xf981, 0xfec5, 0xf9a6, 0xf470, 0xef4b, 0xea40, 0xe558, 0xe09b, 0xdc0e, 0xd7b5, 0xd393, 0xcfa9, 0xcbf7, 0xc87c, 0xc536, 0xc224, 0xbf42, 0xbc8e, 
};